{%extends "admin.html"%}
{%load staticfiles%}
{%block content %}
 <!-- Page Heading -->
                <div class="row">
                    <div class="col-lg-12">
                        <h1 class="page-header">
                            Listar cursos <small>Activacion/Desactivacion de un curso...</small>
                        </h1>
                        <ol class="breadcrumb">
                            <li class="active">
                                <i class="fa fa-dashboard"></i> Seleccione el curso que desea desactivar
                            </li>

                        </ol>
                        <h3>Cursos</h3>
                        <div class="table-responsive">
                            <table class="table table-hover table-striped">
                                <thead>
                                    <tr>
                                        <th>Nombre del Curso</th>
                                        <th>Descripción</th>
                                        <th>Área</th>
                                        <th>Estado</th>
                                        <th>Activar/Desactivar</th>
                                        <th>Editar</th>
                                    </tr>
                                </thead>
                                <tbody>
                                {%for curso in cursos%}
                                    <tr>
                                        <td>{{curso.nombre}}</td>
                                        <td>{{curso.descripcion}}</td>
                                        <td>{{curso.area}}</td>
                                        <td><a href="/cursos/editar/{{curso.id}}"><button class="btn btn-xs btn-info dim"><i class="fa fa-check-square-o"></i> Editar</button></a></td>
                                        {%if curso.activo %}
								            <td><p><span class="badge badge-primary">Activo</span></p></td>
                                            <td><a href="/cursos/eliminar/{{curso.id}}"><button class="btn btn-xs btn-danger dim"><i class="fa fa-check-square-o"></i> Desactivar</button></a></td>
							            {%else%}
								            <td><p><span class="badge badge-danger">Inactivo</span></p></td>
                                            <td><a href="/cursos/eliminar/{{curso.id}}"><button class="btn btn-xs btn-success dim"><i class="fa fa-check-square"></i> Reactivar</button></a></td>
							            {%endif%}

                                    </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>

                </div>


<!-- A Continuación se incluirá el código que será tenido en cuenta para la edición de un curso cuando se presiona el botón 'Editar'
        El código incluye un botón invisible, un modal y un script que hará clic en el botón para que salga el modal con el formulario lleno
        con la información del integrante en cuestión-->
{% if edicion %}
    <button type="button" id="botonModalEdicion" data-toggle="modal" data-target="#editarCurso" style="display:none;"></button>

    <div class="modal inmodal" id="editarCurso" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog">
        <div class="modal-content animated fadeIn">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                    <i class="fa fa-users modal-icon"></i>
                    <h4 class="modal-title">Editar Curso</h4>
                    <small class="font-bold">Por favor modifique a continuación los campos deseados y dé clic en guardar cambios cuando haya terminado, de lo contrario de clic en cancelar.</small>
                </div>
                <div class="modal-body">
                    <form action="" method="post" class="form-horizontal">
                        {% csrf_token %}
                        <div class="form-group">
                            {{form_edicion.nombre.errors}}
                            <label class="col-lg-2 control-label">{{form_edicion.nombre.label}}</label>
                            <div class="col-lg-6">
                            {{form_edicion.nombre}}
                            </div>
                        </div>

                        <div class="form-group">
                            {{form_edicion.descripcion.errors}}
                            <label class="col-lg-2 control-label">{{form_edicion.descripcion.label}}</label>
                            <div class="col-lg-6">{{form_edicion.descripcion}}</div>
                        </div>

                        <div class="form-group">
                            {{form_edicion.area.errors}}
                            <label class="col-lg-2 control-label">{{form_edicion.area.label}}</label>
                            <div class="col-lg-2">{{form_edicion.area}}</div>
                        </div>
                </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-white" href="/cursos/listarcursos" data-dismiss="modal">Cancelar</button>
                        <button type="submit" class="btn btn-primary">Guardar cambios</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
{%endif%}
<!-- Fin código de edición -->

{% endblock %}
{%block js%}
    {{block.super}}
    <!-- Data Tables -->
    <script src="{% static 'js/plugins/dataTables/jquery.dataTables.js' %}"></script>
    <script src="{% static 'js/plugins/dataTables/dataTables.bootstrap.js' %}"></script>
    <script src="{% static 'js/plugins/dataTables/dataTables.responsive.js' %}"></script>
    <!-- Switchery -->
   <script src="{% static 'js/plugins/switchery/switchery.js' %}"></script>

    {%if edicion %}
        <script>
            $(document).ready(function(){
                $('#botonModalEdicion').click();
            });
        </script>
    {%endif%}
    <script>
        $(document).ready(function(){
            var changeCheckbox = document.querySelector('.js-check-change');
            if (changeCheckbox.checked){
                document.getElementById("id_fecha_fin_vin").disabled = true;
                document.getElementById("id_fecha_fin_vin").required = false;
            }else{
                document.getElementById("id_fecha_fin_vin").disabled = false;
                document.getElementById("id_fecha_fin_vin").required = true;
            }

        });
    </script>

    <!-- Page-Level Scripts -->
    <script>
        $(document).ready(function() {
            $('.dataTables-example').dataTable({
                responsive: true,
                "dom": 'T<"clear">lfrtip',
                "tableTools": {
                    "sSwfPath": "js/plugins/dataTables/swf/copy_csv_xls_pdf.swf"
                }
            });

            /* Init DataTables */
            var oTable = $('#editable').dataTable();

            /* Apply the jEditable handlers to the table */
            oTable.$('td').editable( '../example_ajax.php', {
                "callback": function( sValue, y ) {
                    var aPos = oTable.fnGetPosition( this );
                    oTable.fnUpdate( sValue, aPos[0], aPos[1] );
                },
                "submitdata": function ( value, settings ) {
                    return {
                        "row_id": this.parentNode.getAttribute('id'),
                        "column": oTable.fnGetPosition( this )[2]
                    };
                },

                "width": "90%",
                "height": "100%"
            } );


        });

        function fnClickAddRow() {
            $('#editable').dataTable().fnAddData( [
                "Custom row",
                "New row",
                "New row",
                "New row",
                "New row" ] );

        }
    </script>

    <style>
        body.DTTT_Print {
            background: #fff;

        }
        .DTTT_Print #page-wrapper {
            margin: 0;
            background:#fff;
        }

        button.DTTT_button, div.DTTT_button, a.DTTT_button {
            border: 1px solid #e7eaec;
            background: #fff;
            color: #676a6c;
            box-shadow: none;
            padding: 6px 8px;
        }
        button.DTTT_button:hover, div.DTTT_button:hover, a.DTTT_button:hover {
            border: 1px solid #d2d2d2;
            background: #fff;
            color: #676a6c;
            box-shadow: none;
            padding: 6px 8px;
        }

        .dataTables_filter label {
            margin-right: 5px;

        }
    </style>

    <!-- Data picker -->
   <script src="{% static 'js/plugins/datapicker/bootstrap-datepicker.js' %}"></script>
   <!-- Chosen -->
    <script src="{% static 'js/plugins/chosen/chosen.jquery.js' %}"></script>
   <script type="text/javascript">
            $('#data_1 .input-group.date').datepicker({
                todayBtn: "linked",
                keyboardNavigation: false,
                forceParse: false,
                calendarWeeks: true,
                autoclose: true
            });

            $('#data_3 .input-group.date').datepicker({
                startView: 2,
                todayBtn: "linked",
                keyboardNavigation: false,
                forceParse: false,
                autoclose: true
            });

            $('#data_4 .input-group.date').datepicker({
                minViewMode: 1,
                keyboardNavigation: false,
                forceParse: false,
                autoclose: true,
                todayHighlight: true
            });

            var elem_2 = document.querySelector('.js-switch_2');
            var switchery_2 = new Switchery(elem_2, { color: '#ED5565' , size: 'small'});
            var changeCheckbox = document.querySelector('.js-check-change');
            changeCheckbox.onchange = function() {
                if (changeCheckbox.checked){
                    //Nos chekiaron
                    document.getElementById("id_fecha_fin_vin").disabled = true;
                    document.getElementById("id_fecha_fin_vin").required = false;

                }else{
                    //Nos deschekiaron
                    document.getElementById("id_fecha_fin_vin").disabled = false;
                    document.getElementById("id_fecha_fin_vin").required = true;
                }
            };

            var config = {
                '.chosen-select'           : {},
                '.chosen-select-deselect'  : {allow_single_deselect:true},
                '.chosen-select-no-single' : {disable_search_threshold:10},
                '.chosen-select-no-results': {no_results_text:'Oops, no se encontró nada!'},
                '.chosen-select-width'     : {width:"95%"}
            }
            for (var selector in config) {
                $(selector).chosen(config[selector]);
            }

   </script>
{% endblock %}